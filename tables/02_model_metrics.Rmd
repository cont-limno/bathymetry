---
output:
  pdf_document
header-includes: 
  - \pagenumbering{gobble}
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, fig.path = "../figures/", fig.width = 5, fig.height = 6)
# setwd("tables")
```

```{r 02_model_metrics, eval=TRUE}
library(kableExtra)
suppressMessages(library(dplyr))
library(magrittr)
library(stringr)

dt_metrics <- readRDS("../data/01_depth_model/depth_grid_metrics.rds") %>%
  mutate_if(is.numeric, function(x) as.character(round(x, 2))) %>%
  mutate(rsq = as.numeric(rsq)) %>%
  mutate(rsq = case_when(
    as.character(model) == "maxdepth_true_true" ~ NA_real_,
    TRUE ~ rsq)) %>%
  mutate(rmse = round(as.numeric(rmse), 1)) %>%
  mutate(rmse = case_when(
    as.character(model) == "maxdepth_true_true" ~ NA_character_,
    TRUE ~ paste0(rmse, " m"))) %>%
  mutate(mape = case_when(
    as.character(model) == "maxdepth_true_true" ~ NA_character_,
    TRUE ~ paste0(mape, " %"))) %>%
  mutate(model = gsub("maxdepth_", "", model)) %>%
  mutate(model = gsub("false", "proxy", model)) %>%
  tidyr::separate(model, c("slope", "distance")) %>%
  dplyr::select(slope, distance, everything(), -.estimator) 

options(knitr.kable.NA = '-')
knitr::kable(dt_metrics, digits = 2, format = "markdown") 

# clipr::write_clip(
#   knitr::kable(dt_metrics, format = 'latex', align = c("llll"),
# escape = TRUE))
```
